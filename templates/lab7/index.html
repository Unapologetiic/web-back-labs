{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 7{% endblock %}

{% block script %}
<script src="{{ url_for('static', filename='lab7/main.js') }}"></script>
<style>
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
    h1 {
        color: #333;
        text-align: center;
        margin-bottom: 30px;
        font-size: 28px;
    }

    /* –°—Ç–∏–ª–∏ —Ç–∞–±–ª–∏—Ü—ã */
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        background: white;
    }

    thead {
        background: linear-gradient(135deg, #ff66b3, #ff3385);
        color: white;
    }

    th {
        padding: 15px;
        text-align: left;
        font-weight: 600;
        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    td {
        padding: 12px 15px;
        border-bottom: 1px solid #eee;
        vertical-align: middle;
    }

    tbody tr {
        transition: background-color 0.2s;
    }

    tbody tr:hover {
        background-color: #f9f9f9;
    }

    tbody tr:last-child td {
        border-bottom: none;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π —Ñ–∏–ª—å–º–æ–≤ */
    .original-title {
        font-style: italic;
        color: #666;
        font-size: 0.9em;
    }

    .original-title::before {
        content: "(";
    }

    .original-title::after {
        content: ")";
    }

    /* –°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ */
    .action-buttons {
        display: flex;
        gap: 10px;
    }

    .action-buttons button {
        padding: 6px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
    }

    .edit-btn {
        background: #4CAF50;
        color: white;
    }

    .edit-btn:hover {
        background: #45a049;
        transform: translateY(-1px);
        box-shadow: 0 2px 5px rgba(76, 175, 80, 0.3);
    }

    .delete-btn {
        background: #f44336;
        color: white;
    }

    .delete-btn:hover {
        background: #d32f2f;
        transform: translateY(-1px);
        box-shadow: 0 2px 5px rgba(244, 67, 54, 0.3);
    }

    /* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞ */
    .add-film-btn {
        display: block;
        margin: 20px auto 40px;
        padding: 12px 30px;
        background: linear-gradient(135deg, #ff66b3, #ff3385);
        color: white;
        border: none;
        border-radius: 25px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(255, 102, 179, 0.3);
    }

    .add-film-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 102, 179, 0.4);
    }

    .add-film-btn:active {
        transform: translateY(0);
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
        display: none;
        z-index: 1000;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        background: white;
        width: 450px;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        position: fixed;
        padding: 30px;
        border: none;
        border-radius: 12px;
        animation: modalFadeIn 0.3s ease-out;
    }

    @keyframes modalFadeIn {
        from {
            opacity: 0;
            transform: translate(-50%, -60%);
        }
        to {
            opacity: 1;
            transform: translate(-50%, -50%);
        }
    }

    .modal label {
        display: block;
        margin-bottom: 20px;
        font-weight: 500;
        color: #333;
    }

    .modal input[type="text"],
    .modal input[type="number"],
    .modal textarea {
        width: 100%;
        padding: 10px;
        margin-top: 8px;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        box-sizing: border-box;
        font-size: 14px;
        transition: border-color 0.2s;
    }

    .modal input:focus,
    .modal textarea:focus {
        outline: none;
        border-color: #ff66b3;
        box-shadow: 0 0 0 3px rgba(255, 102, 179, 0.1);
    }

    .modal textarea {
        height: 100px;
        resize: vertical;
        font-family: inherit;
    }

    .modal-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 15px;
        margin-top: 25px;
    }

    .modal-buttons button {
        padding: 10px 25px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        font-size: 14px;
        transition: all 0.2s;
    }

    .ok-btn {
        background: linear-gradient(135deg, #ff66b3, #ff3385);
        color: white;
    }

    .ok-btn:hover {
        background: linear-gradient(135deg, #ff3385, #ff0066);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(255, 102, 179, 0.3);
    }

    .cancel-btn {
        background: #f5f5f5;
        color: #666;
        border: 1px solid #ddd;
    }

    .cancel-btn:hover {
        background: #e0e0e0;
        transform: translateY(-1px);
    }

    .modal i {
        color: #888;
        font-size: 12px;
        font-style: normal;
    }

    .error-message {
        color: #f44336;
        font-size: 12px;
        margin-top: 5px;
        min-height: 18px;
    }

    /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
        table {
            font-size: 14px;
        }
        
        .modal {
            width: 90%;
            max-width: 400px;
            padding: 20px;
        }
        
        .action-buttons {
            flex-direction: column;
            gap: 5px;
        }
        
        .action-buttons button {
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block main %}
    <h1>üé¨ –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤</h1>

    <table>
        <thead>
            <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ì–æ–¥</th>
                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
            </tr>
        </thead>
        <tbody id="film-list"></tbody>
    </table>
    <script>
        fillFilmList();
    </script>
    
    <button class="add-film-btn" onclick="addFilm()">+ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º</button>
    
    <div class="modal-overlay" id="modal-overlay" onclick="hideModal()"></div>
    
    <div class="modal">
        <input type="hidden" id="id">
        
        <label>
            –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º: *
            <input type="text" id="title-ru" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º" required>
        </label><br>

        <label>
            –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —è–∑—ã–∫–µ
            <i>(–µ—Å–ª–∏ —Ñ–∏–ª—å–º —Ä—É—Å—Å–∫–∏–π, –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)</i>
            <input type="text" id="title" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
        </label><br>

        <label>
            –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:
            <input type="number" id="year" placeholder="–ì–æ–¥" min="1895" max="2025">
        </label><br>

        <label>
            –û–ø–∏—Å–∞–Ω–∏–µ: *
            <textarea id="description" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞..." required></textarea>
            <div id="description-error" class="error-message"></div>
        </label><br>

        <div class="modal-buttons">
            <button class="cancel-btn" onclick="cancel()">–û—Ç–º–µ–Ω–∞</button>
            <button class="ok-btn" onclick="sendFilm()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
{% endblock %}